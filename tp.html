<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Theme Picker</title>
  <style>
    :root {
      --background-light: #fff;
      --text-light: #333;
      --font-light: Arial, sans-serif;

      --background-dark: #333;
      --text-dark: #fff;
      --font-dark: 'Courier New', monospace;
    }

    body {
      background-color: var(--background-light);
      color: var(--text-light);
      font-family: var(--font-light);
      transition: background-color 0.3s, color 0.3s, font-family 0.3s;
      margin: 0;
    }

    body.dark-theme {
      background-color: var(--background-dark);
      color: var(--text-dark);
      font-family: var(--font-dark);
    }

    button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1em;
      margin: 10px;
    }

    /* Additional style for the theme picker */
    #themePicker {
      display: flex;
      margin-top: 20px;
    }

    .theme-option {
      margin-right: 10px;
    }
  </style>
</head>
<body>

<button id="themeToggle">Toggle Theme</button>

<div id="themePicker">
  <label for="themeSelect">Select Theme:</label>
  <select id="themeSelect" class="theme-option"></select>

  <label for="textColorPicker">Text Color:</label>
  <input type="color" id="textColorPicker" class="theme-option">

  <label for="bgColorPicker">Background Color:</label>
  <input type="color" id="bgColorPicker" class="theme-option">

  <label for="fontFamilyInput">Font Family:</label>
  <input type="text" id="fontFamilyInput" class="theme-option">

  <button id="applyTheme">Apply Theme</button>
</div>

<script>
function toggleTheme() {
  const body = document.body;
  const currentTheme = body.classList.contains('dark-theme') ? 'dark' : 'light';

  if (currentTheme === 'light') {
    body.classList.add('dark-theme');
    localStorage.setItem('theme', 'dark');
  } else {
    body.classList.remove('dark-theme');
    localStorage.setItem('theme', 'light');
  }
}

function applyCustomTheme() {
  const body = document.body;
  const themeSelect = document.getElementById('themeSelect');
  const selectedTheme = themeSelect.value;
  
  // Update CSS variables based on user input
  document.documentElement.style.setProperty('--text-light', textColorPicker.value);
  document.documentElement.style.setProperty('--background-light', bgColorPicker.value);
  document.documentElement.style.setProperty('--font-light', fontFamilyInput.value);

  document.documentElement.style.setProperty('--text-dark', textColorPicker.value);
  document.documentElement.style.setProperty('--background-dark', bgColorPicker.value);
  document.documentElement.style.setProperty('--font-dark', fontFamilyInput.value);

  // Apply the selected theme
  if (selectedTheme === 'dark') {
    body.classList.add('dark-theme');
  } else {
    body.classList.remove('dark-theme');
  }

  // Save the selected theme to localStorage
  localStorage.setItem('theme', selectedTheme);
}

// Populate the theme selector with available themes
const themeSelect = document.getElementById('themeSelect');
themeSelect.innerHTML = `
  <option value="light">Light</option>
  <option value="dark">Dark</option>
`;

// Load saved theme from localStorage
const savedTheme = localStorage.getItem('theme');
if (savedTheme) {
  themeSelect.value = savedTheme;
}

// Event listeners for theme toggle and apply custom theme
const themeToggleBtn = document.getElementById('themeToggle');
const applyThemeBtn = document.getElementById('applyTheme');
const textColorPicker = document.getElementById('textColorPicker');
const bgColorPicker = document.getElementById('bgColorPicker');
const fontFamilyInput = document.getElementById('fontFamilyInput');

if (themeToggleBtn) {
  themeToggleBtn.addEventListener('click', toggleTheme);
}

if (applyThemeBtn) {
  applyThemeBtn.addEventListener('click', applyCustomTheme);
}
</script>

</body>
</html>
